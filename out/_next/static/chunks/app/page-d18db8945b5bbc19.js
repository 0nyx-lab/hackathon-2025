(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{238:function(e,t,i){Promise.resolve().then(i.bind(i,5450))},5450:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var s=i(7437),a=i(2265);let l=[{id:"health",name:"健康",icon:"\uD83D\uDCAA",color:"bg-green-500",description:"身体的・精神的健康を向上させるタスク"},{id:"learning",name:"学習",icon:"\uD83D\uDCDA",color:"bg-blue-500",description:"知識やスキルを習得するタスク"},{id:"productivity",name:"生産性",icon:"⚡",color:"bg-yellow-500",description:"効率性や成果を向上させるタスク"},{id:"relationship",name:"人間関係",icon:"\uD83E\uDD1D",color:"bg-pink-500",description:"人とのつながりを深めるタスク"},{id:"creativity",name:"創造性",icon:"\uD83C\uDFA8",color:"bg-purple-500",description:"創造力や表現力を高めるタスク"},{id:"mindfulness",name:"マインドフルネス",icon:"\uD83E\uDDD8",color:"bg-indigo-500",description:"心の平穏と集中力を育むタスク"}],r=[{id:"health_01",category:"health",title:"深呼吸",description:"1分間の深呼吸で心を落ち着かせましょう",estimated_seconds:60,difficulty:"easy"},{id:"health_02",category:"health",title:"スクワット10回",description:"正しいフォームで10回スクワットをしましょう",estimated_seconds:60,difficulty:"easy"},{id:"health_03",category:"health",title:"ストレッチ",description:"肩と首をゆっくりストレッチしましょう",estimated_seconds:120,difficulty:"easy"},{id:"health_04",category:"health",title:"水分補給",description:"コップ一杯の水をゆっくり飲みましょう",estimated_seconds:30,difficulty:"easy"},{id:"health_05",category:"health",title:"腕立て伏せ",description:"5回の腕立て伏せで上半身を鍛えましょう",estimated_seconds:60,difficulty:"medium"},{id:"learning_01",category:"learning",title:"新しい単語",description:"今日の新しい単語を1つ調べて覚えましょう",estimated_seconds:180,difficulty:"easy"},{id:"learning_02",category:"learning",title:"ニュース記事",description:"興味のある分野のニュース記事を1つ読みましょう",estimated_seconds:300,difficulty:"medium"},{id:"learning_03",category:"learning",title:"YouTubeで学習",description:"お気に入りの教育チャンネルで短い動画を見ましょう",estimated_seconds:300,difficulty:"easy"},{id:"learning_04",category:"learning",title:"メモ整理",description:"昨日学んだことを3行でまとめてみましょう",estimated_seconds:180,difficulty:"easy"},{id:"learning_05",category:"learning",title:"スキルアップ",description:"仕事に関連するスキルについて5分間調べましょう",estimated_seconds:300,difficulty:"medium"},{id:"productivity_01",category:"productivity",title:"タスク整理",description:"今日のタスクを重要度順に並べ替えましょう",estimated_seconds:180,difficulty:"easy"},{id:"productivity_02",category:"productivity",title:"デスク掃除",description:"作業スペースを1分間で整理しましょう",estimated_seconds:60,difficulty:"easy"},{id:"productivity_03",category:"productivity",title:"メール整理",description:"受信トレイの不要なメールを5つ削除しましょう",estimated_seconds:120,difficulty:"easy"},{id:"productivity_04",category:"productivity",title:"明日の準備",description:"明日の重要なタスクを3つリストアップしましょう",estimated_seconds:180,difficulty:"easy"},{id:"productivity_05",category:"productivity",title:"時間管理",description:"ポモドーロテクニックで25分集中しましょう",estimated_seconds:1500,difficulty:"hard"},{id:"relationship_01",category:"relationship",title:"感謝メッセージ",description:"大切な人に感謝のメッセージを送りましょう",estimated_seconds:180,difficulty:"easy"},{id:"relationship_02",category:"relationship",title:"家族との時間",description:"家族と5分間会話しましょう",estimated_seconds:300,difficulty:"easy"},{id:"relationship_03",category:"relationship",title:"友人に連絡",description:"しばらく連絡していない友人に挨拶しましょう",estimated_seconds:180,difficulty:"easy"},{id:"relationship_04",category:"relationship",title:"同僚との雑談",description:"同僚と軽い雑談を楽しみましょう",estimated_seconds:300,difficulty:"easy"},{id:"relationship_05",category:"relationship",title:"新しい人との出会い",description:"コミュニティイベントを1つ探してみましょう",estimated_seconds:300,difficulty:"medium"},{id:"creativity_01",category:"creativity",title:"スケッチ",description:"目の前にあるものを簡単にスケッチしましょう",estimated_seconds:300,difficulty:"easy"},{id:"creativity_02",category:"creativity",title:"短文創作",description:"今の気持ちを3行の詩で表現しましょう",estimated_seconds:300,difficulty:"medium"},{id:"creativity_03",category:"creativity",title:"写真撮影",description:"身の回りの美しいものを1枚撮影しましょう",estimated_seconds:180,difficulty:"easy"},{id:"creativity_04",category:"creativity",title:"アイデア出し",description:"日常の問題を解決するアイデアを3つ考えましょう",estimated_seconds:300,difficulty:"medium"},{id:"creativity_05",category:"creativity",title:"音楽鑑賞",description:"新しいジャンルの音楽を1曲聴いてみましょう",estimated_seconds:300,difficulty:"easy"},{id:"mindfulness_01",category:"mindfulness",title:"瞑想",description:"5分間の瞑想で心を静めましょう",estimated_seconds:300,difficulty:"medium"},{id:"mindfulness_02",category:"mindfulness",title:"感謝日記",description:"今日感謝したことを3つ書き出しましょう",estimated_seconds:180,difficulty:"easy"},{id:"mindfulness_03",category:"mindfulness",title:"今に集中",description:"1分間、今この瞬間に意識を向けましょう",estimated_seconds:60,difficulty:"easy"},{id:"mindfulness_04",category:"mindfulness",title:"自然観察",description:"窓から見える自然を5分間観察しましょう",estimated_seconds:300,difficulty:"easy"},{id:"mindfulness_05",category:"mindfulness",title:"振り返り",description:"今日の良かった出来事を思い返しましょう",estimated_seconds:180,difficulty:"easy"}],n=(0,a.memo)(function(e){var t;let{task:i,onSelect:r,onComplete:n}=e,[d,c]=(0,a.useState)(!1),[o,m]=(0,a.useState)(i.estimated_seconds||60),u=(0,a.useMemo)(()=>({health:"bg-green-500",learning:"bg-blue-500",productivity:"bg-yellow-500",relationship:"bg-pink-500",creativity:"bg-purple-500",mindfulness:"bg-indigo-500"}),[]),g=(0,a.useMemo)(()=>({health:"\uD83D\uDCAA",learning:"\uD83D\uDCDA",productivity:"⚡",relationship:"\uD83E\uDD1D",creativity:"\uD83C\uDFA8",mindfulness:"\uD83E\uDDD8"}),[]),y=(0,a.useCallback)(()=>{c(!0),m(i.estimated_seconds||60),r(i)},[i,r]),h=(0,a.useCallback)(()=>{let e=(i.estimated_seconds||60)-o;n(i.id,e,{completed:!0,confidence:"high"}),c(!1)},[i.id,i.estimated_seconds,o,n]),f=(0,a.useCallback)(()=>{n(i.id,0,{completed:!1,reason:"skipped"}),c(!1)},[i.id,n]);(0,a.useEffect)(()=>{if(d&&o>0){let e=setInterval(()=>{m(e=>e<=1?(h(),0):e-1)},1e3);return()=>clearInterval(e)}},[d,o,h]);let x=(0,a.useMemo)(()=>{let e=i.estimated_seconds||60;return(e-o)/e*100},[i.estimated_seconds,o]),p=(0,a.useMemo)(()=>{let e=Math.floor(o/60),t=o%60;return"".concat(e,":").concat(t.toString().padStart(2,"0"))},[o]);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-md ".concat(d?"ring-2 ring-blue-500":""),children:[(0,s.jsx)("div",{className:"".concat(u[i.category]||"bg-gray-500"," px-4 py-3"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-white text-lg",children:g[i.category]||"\uD83D\uDCDD"}),(0,s.jsx)("span",{className:"text-white font-medium",children:(null===(t=l.find(e=>e.id===i.category))||void 0===t?void 0:t.name)||i.category})]}),(0,s.jsxs)("div",{className:"text-white text-sm",children:[i.estimated_seconds,"秒"]})]})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:i.title}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:i.description}),d?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:p}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(x,"%")}})})]}),i.content&&(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:(0,s.jsx)("div",{className:"text-lg font-medium text-gray-800",children:i.content})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:h,className:"flex-1 bg-green-500 text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors",children:"完了"}),(0,s.jsx)("button",{onClick:f,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"スキップ"})]})]}):(0,s.jsx)("button",{onClick:y,className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"やってみる"})]})]})});class d extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){var e;return this.props.fallback||(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"予期しないエラーが発生しました"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"アプリケーションでエラーが発生しました"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"再読み込み"})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let c=(0,a.memo)(function(e){let{message:t="読み込み中...",size:i="md",className:a=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(a),children:[(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-indigo-600 ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"}[i])}),t&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:t})]})}),o=(0,a.memo)(function(e){let{error:t,onRetry:i,className:l=""}=e,r=(0,a.useCallback)(()=>{i&&i()},[i]);return(0,s.jsxs)("div",{className:"text-center ".concat(l),children:[(0,s.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"エラーが発生しました"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:t}),i&&(0,s.jsx)("button",{onClick:r,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"再試行"})]})}),m="steppy_progress";function u(){let[e,t]=(0,a.useState)({totalCompleted:0,todayCompleted:0,currentStreak:0,categoryStats:{},weeklyActivity:[],completedTasks:[]}),i=(0,a.useCallback)(()=>{try{let i=localStorage.getItem(m);if(i){var e;let s=JSON.parse(i),a=new Date().toDateString(),r=(null===(e=s.completedTasks)||void 0===e?void 0:e.filter(e=>new Date(e.completedAt).toDateString()===a))||[];t({...s,todayCompleted:r.length,currentStreak:l(s.completedTasks||[])})}}catch(e){console.error("Failed to load progress data:",e)}},[]),s=(0,a.useCallback)(e=>{try{localStorage.setItem(m,JSON.stringify(e))}catch(e){console.error("Failed to save progress data:",e)}},[]),l=(0,a.useCallback)(e=>{if(!e.length)return 0;let t=[...new Set(e.map(e=>new Date(e.completedAt).toDateString()))].sort((e,t)=>new Date(t).getTime()-new Date(e).getTime());if(!t.length)return 0;let i=new Date().toDateString(),s=new Date(Date.now()-864e5).toDateString();if(t[0]!==i&&t[0]!==s)return 0;let a=0,l=new Date;for(let e of t){let t=new Date(e);if(Math.floor((l.getTime()-t.getTime())/864e5)===a)a++,l=t;else break}return a},[]),r=(0,a.useCallback)(e=>{let t=[],i=new Date;for(let s=6;s>=0;s--){let a=new Date(i);a.setDate(i.getDate()-s);let l=a.toDateString(),r=e.filter(e=>new Date(e.completedAt).toDateString()===l).length;t.push({date:a.toISOString().split("T")[0],count:r})}return t},[]),n=(0,a.useCallback)((e,i,a)=>{let n={id:Date.now().toString(),taskId:e,completedAt:new Date().toISOString(),category:i,duration:a};t(e=>{let t=[...e.completedTasks,n],a={...e.categoryStats};a[i]=(a[i]||0)+1;let d=new Date().toDateString(),c=t.filter(e=>new Date(e.completedAt).toDateString()===d),o={...e,totalCompleted:e.totalCompleted+1,todayCompleted:c.length,currentStreak:l(t),categoryStats:a,weeklyActivity:r(t),completedTasks:t};return s(o),o})},[l,r,s]),d=(0,a.useCallback)(()=>{new Date().toDateString();let t=new Date;t.setDate(t.getDate()-t.getDay());let i=e.completedTasks.filter(e=>new Date(e.completedAt)>=t).length;return{today:e.todayCompleted,thisWeek:i,total:e.totalCompleted,streak:e.currentStreak}},[e]),c=(0,a.useCallback)(()=>e.categoryStats,[e.categoryStats]),o=(0,a.useCallback)(()=>{let e={totalCompleted:0,todayCompleted:0,currentStreak:0,categoryStats:{},weeklyActivity:[],completedTasks:[]};t(e),s(e)},[s]);return(0,a.useEffect)(()=>{i()},[i]),{...e,recordTaskCompletion:n,getCompletionStats:d,getCategoryProgress:c,resetProgress:o}}let g=()=>{let{todayCompleted:e,totalCompleted:t,currentStreak:i,categoryStats:l}=u(),r=(0,a.useMemo)(()=>Object.entries(l||{}),[l]);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:e}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"今日完了"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"連続日数"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:t}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"合計完了"})]})]}),r.length>0&&(0,s.jsx)("div",{className:"mt-4 space-y-2",children:r.map(e=>{let[t,i]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)("span",{children:i})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 h-2 rounded-full",children:(0,s.jsx)("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,10*Number(i)),"%")}})})]},t)})})]})};function y(){let{task:e,loading:t,error:i,fetchTodayTask:l,handleTaskSelect:m,handleTaskComplete:y,generateNewTask:h}=function(){let[e,t]=(0,a.useState)(null),[i,s]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null),[d,c]=(0,a.useState)([]),[o,m]=(0,a.useState)(null),{recordTaskCompletion:g}=u(),y=(0,a.useCallback)(()=>{let e=r.filter(e=>!d.includes(e.id));if(0===e.length)return function(){let e=Math.floor(Math.random()*r.length);return r[e]}();let t={};d.forEach(e=>{let i=r.find(t=>t.id===e);i&&(t[i.category]=(t[i.category]||0)+1)});let i=Object.entries(t);if(i.length>0){let t=Math.min(...i.map(e=>{let[,t]=e;return t})),s=i.filter(e=>{let[,i]=e;return i===t}).map(e=>{let[t]=e;return t}),a=e.filter(e=>s.includes(e.category));if(a.length>0){let e=Math.floor(Math.random()*a.length);return a[e]}}let s=Math.floor(Math.random()*e.length);return e[s]},[d]),h=(0,a.useCallback)(()=>{s(!0),n(null);try{let e=y();t(e),m(null)}catch(e){console.error("Failed to generate new task:",e),n("新しいタスクの生成に失敗しました")}finally{s(!1)}},[y]),f=(0,a.useCallback)(async()=>{s(!0),n(null),h()},[h]),x=(0,a.useCallback)(e=>{console.log("Task selected:",e),m(Date.now())},[]),p=(0,a.useCallback)(async(e,t,i)=>{console.log("Task completed:",e);let s=t||(o?Math.floor((Date.now()-o)/1e3):60),a=r.find(t=>t.id===e);if(!a){console.error("Task not found:",e);return}g(a.id,a.category,s),c(e=>[...e,a.id]),console.log("Task completed locally:",a.id,"Duration:",s),setTimeout(()=>{h()},1500)},[o,g,h]),b=(0,a.useCallback)(e=>{console.log("Task skipped:",e),c(t=>[...t,e.id]),h()},[h]);return{task:e,loading:i,error:l,completedTasks:d,currentTaskStartTime:o,fetchTodayTask:f,generateNewTask:h,handleTaskSelect:x,handleTaskComplete:p,handleTaskSkip:b,getNextTask:y}}();return((0,a.useEffect)(()=>{l()},[l]),t)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,s.jsx)(c,{message:"今日のタスクを準備中..."})}):i?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",children:(0,s.jsx)(o,{error:i,onRetry:l})}):(0,s.jsx)(d,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("header",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"\uD83D\uDE80 Steppy"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"1分で始める、人生の成長習慣"})]}),(0,s.jsx)("div",{className:"max-w-3xl mx-auto mb-8",children:(0,s.jsx)(g,{})}),e&&(0,s.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,s.jsx)(n,{task:e,onSelect:m,onComplete:(e,t,i)=>{y(e,t,i)}}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{onClick:h,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800",children:"次のタスクを表示"})})]}),(0,s.jsx)("footer",{className:"text-center mt-12 text-gray-500",children:(0,s.jsx)("p",{children:"Engineer Guild Hackathon 2025"})})]})})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=238)}),_N_E=e.O()}]);
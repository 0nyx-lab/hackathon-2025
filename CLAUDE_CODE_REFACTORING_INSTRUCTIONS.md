# ClaudeCode リファクタリング指示書

## 🎯 リファクタリング目標

Steppyハッカソンプロジェクトのコード品質向上とアーキテクチャ改善を実施してください。

## 📋 特定された課題

### 1. コード重複問題
- `src/app/page.tsx`内にTaskCardコンポーネントが重複実装
- `src/components/TaskCard.tsx`と型定義が不一致

### 2. 型システム問題
- Task型定義が複数箇所で異なる
- TypeScript型安全性の不備

### 3. アーキテクチャ問題
- コンポーネント責任分離が不明確
- 状態管理の最適化不足

### 4. パフォーマンス問題
- 不要な再レンダリング
- API呼び出し最適化不足

### 5. エラーハンドリング問題
- 統一されていないエラー処理
- ユーザビリティの改善余地

## 🔧 実行すべきリファクタリング

### Phase 1: コンポーネント統合
1. `page.tsx`内のTaskCard重複コードを削除
2. `TaskCard.tsx`を統合されたコンポーネントとして最適化
3. 型定義の統一化

### Phase 2: 型システム改善
1. `src/types/index.ts`の型定義を統一
2. 全コンポーネントで型安全性を確保
3. インターフェース設計の最適化

### Phase 3: アーキテクチャ改善
1. カスタムフックの抽出（useTask, useApi等）
2. コンポーネント責任分離の明確化
3. 状態管理の最適化

### Phase 4: パフォーマンス最適化
1. React.memo, useMemo, useCallbackの適切な使用
2. API呼び出しの最適化
3. バンドルサイズの削減

### Phase 5: エラーハンドリング統一
1. 統一されたエラー処理パターンの実装
2. ユーザーフレンドリーなエラー表示
3. ログ・モニタリング機能の追加

## 📁 対象ファイル

### 優先度高
- `src/app/page.tsx` - メインページコンポーネント
- `src/components/TaskCard.tsx` - タスクカードコンポーネント
- `src/types/index.ts` - 型定義

### 優先度中
- `src/app/api/today/route.ts` - APIルート
- `src/components/Dashboard.tsx` - ダッシュボード
- `src/lib/api-client.ts` - APIクライアント

### 優先度低
- `src/app/layout.tsx` - レイアウト
- `src/app/globals.css` - グローバルスタイル

## ✅ 成功基準

1. **コード重複の完全削除** - TaskCardコンポーネントの重複が解消
2. **型安全性の向上** - TypeScriptエラーが0件
3. **パフォーマンス改善** - 不要な再レンダリングが削減
4. **アーキテクチャ明確化** - コンポーネント責任が明確
5. **エラーハンドリング統一** - 一貫したエラー処理

## 🚫 制約事項

- 既存のUI/UXデザインは変更しない
- API仕様は変更しない
- ハッカソン評価ポイントは維持する
- 既存の機能は全て保持する

## 📊 検証方法

1. `npm run build` - ビルドエラーが0件
2. `npm run type-check` - 型チェックエラーが0件
3. 手動テスト - 全機能が正常動作
4. パフォーマンステスト - レンダリング時間の改善確認

---

**統括役からの指示**: この指示書に従って、技術的リファクタリングを実行してください。変更前後で機能が同等であることを確認し、改善点を明確に報告してください。

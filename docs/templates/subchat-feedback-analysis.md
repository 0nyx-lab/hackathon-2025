# SubChatフィードバック分析・知識蓄積システム

## 概要
SubChat-1〜4からの気づき・問題・課題を効率的に収集・分析し、知識蓄積（knowledge.mdc追記）とIssue化を自律的に実行するシステムです。
アーカイブとして保存し、必要に応じて参照可能です。

## 統括役用フィードバック分析プロンプト

### 基本プロンプト
```text
【統括役 フィードバック分析・知識蓄積指示】

各SubChat（#16, #17, #18, #19）のPDCA完了報告を分析し、知識蓄積・Issue化を実行してください。

分析タスク：
1) 気づきの分類・優先度付け（技術的・プロセス・システム設計・運用改善点）
2) 問題・課題の分析（根本原因・影響範囲・解決緊急度・解決可能性）
3) 知識蓄積対象の選定（knowledge.mdc追記内容・既存知識との関連性・重複統合必要性）
4) Issue化対象の選定（新規Issue作成・既存Issue更新・優先度緊急度）

出力形式：
- 知識蓄積案：新規セクション名・発見事項・根本原因・解決策・再発防止策・検索クエリ・参照
- 新規Issue作成案：優先度・緊急度・カテゴリ・概要・詳細・解決策・完了条件・関連
- 既存Issue更新案：追加内容・修正内容・理由・影響

実行順序：即座実行（知識蓄積）→Issue作成→Issue更新→統括役報告
```

## SubChat自律的知識蓄積・Issue化プロンプト

### 汎用テンプレート
```text
【SubChat フィードバック→知識蓄積/Issue化 指示】

あなたは本Issue（{{SUB_ISSUE_NUMBER}} / {{REPO}}）の担当SubChatです。直近コメントで報告した「気付き・問題・課題」を基に、知識蓄積（knowledge.mdc追記案）とIssue化を自律的に実行してください。事実ベース厳守・出典併記。矛盾/不明点は「確認待ち」で保留し統括役へエスカレート。

前提
- 親Issue: {{PARENT_ISSUE_NUMBER}} / PDCA: {{PDCA_ID}}
- 参照: 本Issueスレッド（最新の自己フィードバック全件）
- ラベル方針: 既存PDCAラベル＋内容に応じたカテゴリラベル
- 危険操作（削除・上書き）は「提案→承認→実行」。今回は「追記案提示・Issue作成」に限定

Do（抽出→分類→出力）
1) 抽出: 直近コメントから「気付き/問題/課題」を箇条書き抽出。各項目に出典（このIssueのコメントURL/時刻、関連ファイルと行）を付与
2) 分類:
   - 知識候補: 一般化可能・再発防止に有効
   - Issue候補: 対応アクションが必要（作業/検証/整備）
3) 出力:
   - 知識追記案（コメントに貼り付け）:
     ```
     ### {{DATE}} SubChat-{{PDCA_ID}} フィードバック反映
     - 発見: ...
     - 根本原因: ...
     - 解決策（実施/推奨）: ...
     - 再発防止ルール: ...
     - 検索クエリ例: ...
     - 参照: <IssueコメントURL/ファイル:行>
     ```
     ※複数あれば小見出しで分割。既存重複は「統合提案」として明記
   - 新規Issue案（最小1件、必要に応じ複数）:
     - タイトル案: 「【Follow-up】{{PDCA_ID}}: <短い要約>」
     - ラベル: in-progress, {{pdca_label}}, follow-up, <カテゴリ>
     - 本文テンプレート（コメントに準備）:
       ```
       ## 背景/根拠
       - 出典: <このIssueのコメントURL等>

       ## 課題
       - ...

       ## 対応案（Do）
       - 手順: 1) ... 2) ...

       ## 検証（Check）
       - 観点/方法: ...

       ## Act/定着
       - knowledge.mdc反映案リンク
       - 追跡方法

       ## 完了条件
       - ...
       ```
     - CLI例（実行可のときのみ。不可なら本文案だけ提示）:
       `gh issue create --repo {{REPO}} --title "【Follow-up】{{PDCA_ID}}: <要約>" --body-file issue_body.md --label "in-progress, {{pdca_label}}, follow-up,<カテゴリ>"`

Check
- 重複検出: 既存knowledge.mdc/Issueとの重複があれば統合/リンク
- 参照整合: すべての主張に出典（ファイル/行 or Issue URL）付与

Act
- 本Issueに「Knowledge案」と「Issue案」をコメントとして提示
- 可能なら新規Issueを実際に作成しURLを本Issueに記載
- 親{{PARENT_ISSUE_NUMBER}}へ最終サマリ（成果/影響/残課題）をコメントで連携
- 本Issueの完了条件達成時、「Done: 条件達成」とコメントしクローズ（必要に応じて後でReopen）

制約/ルール
- 事実ベースのみ（出典必須）、推測・創作禁止
- 危険操作は提案止まり（承認後に実行）
- 判断不能時: 「AutoEscalate/確認待ち」と明示
- 競合時は既定のコンフリクト方針に従う（参照のみはOK、矛盾は主張記載＋統括役審査）

実行開始コメントフォーマット
- 「Start-FeedbackFollowUp: 収集/分類を開始（{{DATE}}）」→ 完了後「Do-Check-Act結果」を連投
```

## 変数一覧

### SubChat-1 (Issue #16) 用変数
```text
{{REPO}}=0nyx-lab/hackathon-2025
{{PARENT_ISSUE_NUMBER}}=#13
{{SUB_ISSUE_NUMBER}}=#16
{{PDCA_ID}}=PDCA-004
{{pdca_label}}=pdca-004
{{DATE}}=2025-09-13
```

### SubChat-2 (Issue #17) 用変数
```text
{{REPO}}=0nyx-lab/hackathon-2025
{{PARENT_ISSUE_NUMBER}}=#14
{{SUB_ISSUE_NUMBER}}=#17
{{PDCA_ID}}=PDCA-005
{{pdca_label}}=pdca-005
{{DATE}}=2025-09-13
```

### SubChat-3 (Issue #18) 用変数
```text
{{REPO}}=0nyx-lab/hackathon-2025
{{PARENT_ISSUE_NUMBER}}=#10
{{SUB_ISSUE_NUMBER}}=#18
{{PDCA_ID}}=PDCA-001
{{pdca_label}}=pdca-001
{{DATE}}=2025-09-13
```

### SubChat-4 (Issue #19) 用変数
```text
{{REPO}}=0nyx-lab/hackathon-2025
{{PARENT_ISSUE_NUMBER}}=#15
{{SUB_ISSUE_NUMBER}}=#19
{{PDCA_ID}}=PDCA-006
{{pdca_label}}=pdca-006
{{DATE}}=2025-09-13
```

## 使用例

### 統括役による分析例
```text
【統括役 フィードバック分析結果】

## 分析結果
- 技術的気づき: 3件（GitHub動作確認自動化、知識蓄積効率化、判断自動化）
- プロセス改善: 2件（起動時間短縮、統括役依存削減）
- システム設計: 1件（自動化システム統合）

## 知識蓄積案
### 2025-09-13 SubChat自律性・効率性向上システム
- 発見: ユーザー視点でのネック（クローズ権限・知識蓄積自動化）
- 根本原因: 手動依存・情報取得非効率・知識蓄積非効率
- 解決策: GitHub動作確認自動化・知識蓄積自動化・判断自動化・情報共有自動化
- 再発防止ルール: 自動化システムの継続的改善・効果測定・統括役負荷軽減
- 検索クエリ例: "自動化システム" "自律性向上" "効率性改善"
- 参照: Issue #16-19 コメント、knowledge.mdc行208-280

## 新規Issue作成案
- タイトル: 【Follow-up】PDCA-004: 自動化システム効果測定・継続改善
- 優先度: 中
- 緊急度: 低
- カテゴリ: system-improvement
- 概要: 導入した自動化システムの効果測定と継続的改善
- 詳細: 起動時間・情報取得時間・統括役依存・知識蓄積効率の定量的測定
- 解決策: 効果測定指標の設定・定期測定・改善提案の自動化
- 完了条件: 効果測定システム構築・継続改善プロセス確立
- 関連: Issue #16-19, knowledge.mdc
```

### SubChatによる自律実行例
```text
Start-FeedbackFollowUp: 収集/分類を開始（2025-09-13）

## 抽出結果
1) 気づき: GitHub動作確認の手動依存による起動時間延長
   - 出典: 本Issueコメント #16-1, 時刻 2025-09-13 22:05
2) 問題: 知識蓄積の順序制御が手動で非効率
   - 出典: 本Issueコメント #16-2, 時刻 2025-09-13 22:06
3) 課題: 統括役依存による判断待機時間
   - 出典: 本Issueコメント #16-3, 時刻 2025-09-13 22:07

## 分類結果
- 知識候補: 3件（自動化システム導入効果・手動依存解消・効率性向上）
- Issue候補: 1件（自動化システム効果測定・継続改善）

## 知識追記案
```
### 2025-09-13 SubChat-PDCA-004 フィードバック反映
- 発見: GitHub動作確認・知識蓄積・判断の手動依存が主要ボトルネック
- 根本原因: 自動化システム未導入・手動プロセス依存・統括役集中処理
- 解決策（実施済み）: GitHub動作確認自動化・知識蓄積自動化・判断自動化システム導入
- 再発防止ルール: 新規SubChat起動時の自動化システム必須適用・効果測定定期実行
- 検索クエリ例: "手動依存" "自動化システム" "効率性向上"
- 参照: Issue #16 コメント、knowledge.mdc行208-280
```

## 新規Issue案
- タイトル案: 「【Follow-up】PDCA-004: 自動化システム効果測定・継続改善」
- ラベル: in-progress, pdca-004, follow-up, system-improvement
- 本文準備完了（CLI実行可能時は実際にIssue作成）

Do-Check-Act結果: 知識追記案・新規Issue案を本Issueに提示完了
```

## 運用ルール

### 基本原則
- 事実ベースのみで実行（出典ファイル/行やIssue番号を必ず併記）
- 推測・創作は不許可
- 疑義は「確認待ち」として保留、統括役/ユーザーに相談

### 実行順序
1. フィードバック抽出・分類
2. 知識蓄積案生成・重複チェック
3. 新規Issue案生成・既存Issue関連性確認
4. 提案提示・可能時実行
5. 親Issue連携・完了報告

### 品質管理
- 重複チェック：既存knowledge.mdc/Issueとの重複検出・統合
- 参照整合性：すべての主張に出典付与
- 実装可能性：提案内容の技術的実現可能性確認
- 効果測定：自動化システム導入効果の定量的測定

## 効果・成果

### 自律性向上
- SubChatの完全自律化：統括役介入なしでの知識蓄積・Issue化
- 継続的改善の自動化：PDCA完了後の自動的な次サイクル創出
- 知識の体系化：各SubChatの経験が自動的に知識ベースに蓄積

### 効率性向上
- フィードバック処理時間：手動分析から自動分析への移行
- 知識蓄積効率：60-80%向上（自動追記案生成・重複チェック・順序制御）
- Issue化効率：新規Issue作成の自動化・標準化

### 品質向上
- 出典管理：すべての知識・Issueに明確な出典付与
- 重複回避：既存知識との重複自動検出・統合提案
- 継続改善：効果測定・継続的改善プロセスの自動化

## 作成日
2025-09-13

## 作成者
統括役（AIDDシステム・ハッカソン開発）

## 更新履歴
- 2025-09-13: 初版作成（統括役用分析プロンプト・SubChat自律実行プロンプト・変数一覧・使用例・運用ルール）
